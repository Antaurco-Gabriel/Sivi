extends ../../../layouts/platform/main

block head
  link( rel='stylesheet', href='/views/users-module/admin/companies-list/companies-list.css' )
  link( rel='stylesheet', href='/public/css/loader.css' )
  script(src="https://unpkg.com/vue@next")

block content

  section.table-section(id="table" data-companies=companies)
    .loader-section(:style="{'display': display}")
      .loader-section__animation
        span
        span
        span
    .body-profile
      .title-component
        .title-component__title Lista de empresas
        .title-component__line

      .row.my-4.justify-content-md-end
        .col-md-6
          .buttons-component.my-1.justify-content-md-end.px-4
            a.custom-button.buttons-component__button(href='/admin/modulo-usuarios/registrar-empresa') Registrar empresa
      
      .table-table-section.my-3(v-if="displayedData.length>0")
        table.table-table-section__table
          thead
            tr
              td(scope="col") RazÃ³n Social
              td(scope="col") RUC
              td(scope="col") Opciones
          tbody
            tr(v-for="(data, index) in displayedData" :key="data._id")
              td(scope="col") {{data.name}}
              td(scope="col") {{data.ruc}}
              td.table-table-section__table--options(scope="col")
                .dropdown
                  button.dropbtn(@click='dropdownButton(index)') Opciones
                  .dropdown-content(:id=`'myDropdown-'+index`)
                    a(:href=`'/admin/modulo-usuarios/lista-usuarios/'+ data._id`) Ver usuarios
                    a(:href=`'#'`) Registrar usuario
                    button(type="button" @click='confirmDelete(data._id)').dropdown-inter-button.cursor-pointer Eliminar empresa

      .table-pagination-section(v-else)
        h3(style="color:white; font-weight: 400;") No hay empresas registradas aÃºn

      .table-pagination-section(v-if="displayedData.length>0")
        ul.table-pagination
          li
            a.table-pagination__page.table-pagination__page--firt(v-if="page != 1 && page >= 4" @click="page = 1") {{pages[0]}}
          li
            a(v-if="page != 1" @click="page--")
              span(aria-hidden='true') &laquo;
          li(:class="page == pageNumber? 'active':'' " v-for="pageNumber in pages.slice(page==1?page-1: page==2?page-2:page-3, page==1?page+3:page+2)" @click="page = pageNumber" :key="pageNumber")
            a() {{pageNumber}}
          li
            a(v-if="page < pages.length" @click="page++")
              span(aria-hidden='true') &raquo;
          li
            a.table-pagination__page.table-pagination__page--last(v-if="page != pages.length && page <= pages.length - 3" @click="page = pages.length") {{pages.length}}

block scripts
  script(defer src="/views/users-module/admin/companies-list/companies-list.vue.js")